{"ast":null,"code":"var _jsxFileName = \"/home/samuel/Documentos/repositorios/ProjetoDevWeb/frontend/src/protected/pages/Hortalicas/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Breadcrumb, Container } from 'react-bootstrap';\nimport Titulo from '../../components/Titulo';\nimport TabelaHortalicas from '../../components/TabelaHortalicas';\nimport { showConfirm } from '../../components/ConfirmAcao';\nimport { notificarSucesso, notificarErro } from '../../components/Notificacao';\nimport { useHistory } from 'react-router-dom';\nimport { DeleteOutlined, EditOutlined, SmileOutlined } from '@ant-design/icons';\nimport { isClienteLogado, getKeyUsuarioLogado } from '../../../service/usuario';\nimport api from '../../../service/api';\nimport { Divider, Button, Modal, Radio, Rate } from 'antd';\nconst {\n  Item\n} = Breadcrumb;\nconst {\n  Group\n} = Radio;\n\nfunction Hortalicas() {\n  const [clienteLogado, setClienteLogado] = useState(false);\n  const [funcionarioLogado, setFuncionarioLogado] = useState(false);\n  const [keyHortalica, setKeyHortalica] = useState('');\n  const [modalVisible, setModalVisible] = useState(false);\n  const [avaliacao, setAvaliacao] = useState(3);\n  const desc = ['Só Deus na causa', 'Mais ou menos', 'Normal', 'Boazinha', 'Showww'];\n  useEffect(() => {\n    const verificarUsuarioLogado = async () => {\n      const clienteLogado = await isClienteLogado();\n      setClienteLogado(clienteLogado);\n      setFuncionarioLogado(!clienteLogado);\n    };\n\n    verificarUsuarioLogado();\n  }, []);\n  const history = useHistory();\n  const [handleUpdateTable, setHandleUpdateTable] = useState(false);\n\n  const carregaHortalicas = async () => {\n    const {\n      data\n    } = await api.get('/hortalica');\n    return data;\n  };\n\n  const excluiHortalica = async ({\n    key\n  }) => {\n    try {\n      await api.delete(`/hortalica/${key}`);\n      notificarSucesso('Hortaliça removida com sucesso.');\n      setHandleUpdateTable(!handleUpdateTable);\n    } catch (e) {\n      const {\n        mensagem\n      } = e.response.data;\n      notificarErro(mensagem);\n    }\n  };\n\n  const editarHortalica = key => {\n    history.push({\n      pathname: '/perfilHortalica',\n      search: `?key=${key}`\n    });\n  };\n\n  const avaliar = async () => {\n    try {\n      const keyUsuario = await getKeyUsuarioLogado();\n      await api.post(`/hortalica/avaliacao/${keyHortalica}`, {\n        avaliacao\n      }, {\n        params: {\n          keyUsuario\n        }\n      });\n      notificarSucesso('Hortaliça Avaliada com sucesso.');\n    } catch (e) {\n      const {\n        mensagem\n      } = e.response.data;\n      notificarErro(mensagem);\n    }\n  };\n\n  const closeModal = () => {\n    setModalVisible(false);\n  };\n\n  const acoes = {\n    title: 'Ações',\n    dataIndex: 'acoes',\n    key: 'acoes',\n    render: (_, record) => /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, funcionarioLogado && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      title: 'Editar hortaliça',\n      type: \"primary\",\n      style: {\n        marginLeft: '2px'\n      },\n      icon: /*#__PURE__*/React.createElement(EditOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 35\n        }\n      }),\n      onClick: _ => {\n        editarHortalica(record.key);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      title: 'Excluir hortaliça',\n      type: \"primary\",\n      style: {\n        marginLeft: '2px'\n      },\n      danger: true,\n      icon: /*#__PURE__*/React.createElement(DeleteOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 35\n        }\n      }),\n      onClick: _ => {\n        const title = 'Deseja excluir a hortaliça?';\n        const content = `Ao clicar em OK você excluirá a hortaliça de código ${record.key}`;\n        const params = {\n          key: record.key\n        };\n        showConfirm(title, content, excluiHortalica, params);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }\n    })), clienteLogado && /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      style: {\n        marginLeft: '2px'\n      },\n      title: 'Avaliar Hortaliça',\n      icon: /*#__PURE__*/React.createElement(SmileOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 31\n        }\n      }),\n      onClick: _ => {\n        if (record.avaliacao) {\n          setAvaliacao(record.avaliacao);\n        }\n\n        setKeyHortalica(record.key);\n        setModalVisible(true);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }))\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Item, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, \"Principal\"), /*#__PURE__*/React.createElement(Item, {\n    active: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, \"Hortali\\xE7as\")), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Titulo, {\n    nome: \"Hortali\\xE7as\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TabelaHortalicas, {\n    getData: carregaHortalicas,\n    acoes: acoes,\n    handleUpdateTable: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }), funcionarioLogado && /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    href: \"/perfilHortalica\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }, \"Cadastrar\"), /*#__PURE__*/React.createElement(Modal, {\n    visible: modalVisible,\n    title: \"Avaliar Hortali\\xE7a\",\n    onOk: avaliar,\n    onCancel: closeModal,\n    footer: [/*#__PURE__*/React.createElement(Button, {\n      key: \"back\",\n      danger: true,\n      type: \"primary\",\n      onClick: closeModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 25\n      }\n    }, \"Cancelar\"), /*#__PURE__*/React.createElement(Button, {\n      key: \"submit\",\n      type: \"primary\",\n      onClick: avaliar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }, \"Confirmar\")],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(Rate, {\n    tooltips: desc,\n    onChange: v => {\n      setAvaliacao(v);\n    },\n    value: avaliacao,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 25\n    }\n  }), avaliacao ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ant-rate-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 38\n    }\n  }, desc[avaliacao - 1]) : ''))));\n}\n\nexport default Hortalicas;","map":{"version":3,"sources":["/home/samuel/Documentos/repositorios/ProjetoDevWeb/frontend/src/protected/pages/Hortalicas/index.js"],"names":["React","useState","useEffect","Breadcrumb","Container","Titulo","TabelaHortalicas","showConfirm","notificarSucesso","notificarErro","useHistory","DeleteOutlined","EditOutlined","SmileOutlined","isClienteLogado","getKeyUsuarioLogado","api","Divider","Button","Modal","Radio","Rate","Item","Group","Hortalicas","clienteLogado","setClienteLogado","funcionarioLogado","setFuncionarioLogado","keyHortalica","setKeyHortalica","modalVisible","setModalVisible","avaliacao","setAvaliacao","desc","verificarUsuarioLogado","history","handleUpdateTable","setHandleUpdateTable","carregaHortalicas","data","get","excluiHortalica","key","delete","e","mensagem","response","editarHortalica","push","pathname","search","avaliar","keyUsuario","post","params","closeModal","acoes","title","dataIndex","render","_","record","marginLeft","content","v"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Breadcrumb, Container } from 'react-bootstrap';\nimport Titulo from '../../components/Titulo';\nimport TabelaHortalicas from '../../components/TabelaHortalicas';\nimport { showConfirm } from '../../components/ConfirmAcao';\nimport { notificarSucesso, notificarErro } from '../../components/Notificacao';\nimport { useHistory } from 'react-router-dom';\nimport { DeleteOutlined, EditOutlined, SmileOutlined } from '@ant-design/icons';\nimport {isClienteLogado, getKeyUsuarioLogado} from '../../../service/usuario';\nimport api from '../../../service/api';\n\nimport { Divider, Button, Modal, Radio, Rate} from 'antd';\n\nconst { Item } = Breadcrumb;\nconst { Group } = Radio;\n\nfunction Hortalicas() {\n\n    const [clienteLogado, setClienteLogado] = useState(false);\n    const [funcionarioLogado, setFuncionarioLogado] = useState(false);\n\n    const [keyHortalica, setKeyHortalica] = useState('');\n    const [modalVisible, setModalVisible] = useState(false);\n    const [avaliacao, setAvaliacao] = useState(3);\n    const desc = ['Só Deus na causa', 'Mais ou menos', 'Normal', 'Boazinha', 'Showww'];\n\n    useEffect(() => {\n        const verificarUsuarioLogado = async () => {\n            const clienteLogado = await isClienteLogado();\n            setClienteLogado(clienteLogado);\n            setFuncionarioLogado(!clienteLogado);\n        }\n        verificarUsuarioLogado();\n    }, []);\n\n    const history = useHistory();\n\n    const [handleUpdateTable, setHandleUpdateTable] = useState(false);\n\n    const carregaHortalicas = async () => {\n        const { data } = await api.get('/hortalica');\n        return data;\n    }\n\n\n    const excluiHortalica = async ({ key }) => {\n        try {\n            await api.delete(`/hortalica/${key}`);\n            notificarSucesso('Hortaliça removida com sucesso.')\n            setHandleUpdateTable(!handleUpdateTable);\n        } catch (e) {\n            const { mensagem } = e.response.data;\n            notificarErro(mensagem);\n        }\n    }\n\n    const editarHortalica = (key) => {\n        history.push({\n            pathname: '/perfilHortalica',\n            search: `?key=${key}`\n        })\n    }\n\n    const avaliar = async () => {\n        try {\n            const keyUsuario = await getKeyUsuarioLogado();\n            await api.post(`/hortalica/avaliacao/${keyHortalica}`,{avaliacao},{params:{keyUsuario}});\n            notificarSucesso('Hortaliça Avaliada com sucesso.');\n        } catch (e) {\n            const { mensagem } = e.response.data;\n            notificarErro(mensagem);\n        }\n    }\n\n    const closeModal = () => {\n        setModalVisible(false);\n    }\n\n    const acoes = {\n        title: 'Ações',\n        dataIndex: 'acoes',\n        key: 'acoes',\n        render: (_, record) => (\n            <span>\n                {funcionarioLogado &&\n                    <div>\n                        <Button\n                            title={'Editar hortaliça'}\n                            type='primary'\n                            style={{ marginLeft: '2px' }}\n                            icon={<EditOutlined />}\n                            onClick={_ => {\n                                editarHortalica(record.key);\n                            }}\n                        />\n\n                        <Button\n                            title={'Excluir hortaliça'}\n                            type='primary'\n                            style={{ marginLeft: '2px' }}\n                            danger\n                            icon={<DeleteOutlined />}\n                            onClick={_ => {\n                                const title = 'Deseja excluir a hortaliça?'\n                                const content = `Ao clicar em OK você excluirá a hortaliça de código ${record.key}`;\n                                const params = { key: record.key };\n                                showConfirm(title, content, excluiHortalica, params);\n                            }\n                            }\n                        />\n                    </div>\n                }\n                {clienteLogado &&\n                    <Button\n                        type='primary'\n                        style={{ marginLeft: '2px' }}\n                        title={'Avaliar Hortaliça'}\n                        icon={<SmileOutlined />}\n                        onClick={_ => {\n                            if(record.avaliacao){\n                                setAvaliacao(record.avaliacao);\n                            }\n                            setKeyHortalica(record.key);\n                            setModalVisible(true);\n\n                        }}\n                    />\n                }\n            </span>\n        )\n    }\n\n    return (\n        <div>\n            <Breadcrumb>\n                <Item href=\"/\">Principal</Item>\n                <Item active>Hortaliças</Item>\n            </Breadcrumb>\n            <Container>\n                <Titulo nome='Hortaliças' />\n                <Divider />\n                <TabelaHortalicas getData={carregaHortalicas} acoes={acoes} handleUpdateTable />\n                <Divider />\n                {funcionarioLogado &&\n                    <Button type='primary' href='/perfilHortalica'>Cadastrar</Button>\n                }\n            \n            <Modal\n                    visible={modalVisible}\n                    title=\"Avaliar Hortaliça\"\n                    onOk={avaliar}\n                    onCancel={closeModal}\n                    footer={[\n                        <Button key='back' danger type='primary' onClick={closeModal}>\n                            Cancelar\n                    </Button>,\n                        <Button key='submit' type='primary' onClick={avaliar}>\n                            Confirmar\n                    </Button>,\n                    ]}\n                >\n                     <span>\n                        <Rate tooltips={desc} onChange={(v)=>{\n                            setAvaliacao(v);\n                        }} value={avaliacao} />\n                        {avaliacao ? <span className=\"ant-rate-text\">{desc[avaliacao - 1]}</span> : ''}\n                    </span>\n                </Modal>\n            </Container>\n        </div>\n    );\n}\n\nexport default Hortalicas;"]},"metadata":{},"sourceType":"module"}