{"ast":null,"code":"var _jsxFileName = \"/home/samuel/Documentos/repositorios/ProjetoDevWeb/frontend/src/protected/components/FormHortalica/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Form, Select, InputNumber, Button, Input, Divider } from 'antd';\nimport { notificarErro, notificarSucesso } from '../Notificacao';\nimport { useHistory } from 'react-router-dom';\nimport api from '../../../service/api';\n\nfunction FormHortalica({\n  keyHortalica,\n  atualizar\n}) {\n  const history = useHistory();\n  const categorias = ['Folhas', 'Temperos', 'Legumes', 'Raizes'];\n  const [hortalica, setHortalica] = useState({});\n  const [loadingSalvar, setLoadingSalvar] = useState(false);\n  const [loadingAtualizar, setLoadingAtualizar] = useState(false);\n  const [carregado, setCarregado] = useState(false);\n  useEffect(() => {\n    async function buscarHortalica() {\n      if (atualizar) {\n        if (keyHortalica) {\n          try {\n            const {\n              data\n            } = await api.get(`/hortalica/${keyHortalica}`);\n            await setHortalica(data);\n            setCarregado(true);\n          } catch (e) {\n            const {\n              mensagem\n            } = e.reponse.data;\n            notificarErro(mensagem);\n          }\n        }\n      }\n    }\n\n    buscarHortalica();\n  }, [atualizar, keyHortalica]);\n\n  const onFormLayoutChange = ({\n    size\n  }) => {\n    console.log('formChange');\n  };\n\n  const onFinish = async values => {\n    setLoadingSalvar(true);\n    const {\n      nome,\n      categoria,\n      valor\n    } = values;\n\n    if (valor <= 0) {\n      notificarErro('Valor inválido.');\n    }\n\n    try {\n      await api.post('/hortalica', {\n        nome,\n        categoria,\n        valor\n      });\n      notificarSucesso('Hortaliça cadastrada.');\n      setLoadingSalvar(false);\n      history.push('/hortalicas');\n    } catch (e) {\n      const {\n        mensagem\n      } = e.reponse.data;\n      notificarErro(mensagem);\n      setLoadingSalvar(false);\n    }\n  };\n\n  const onFinishEdit = async values => {\n    setLoadingAtualizar(true);\n    const {\n      nome,\n      categoria,\n      valor\n    } = values;\n\n    try {\n      await api.put(`/hortalica/${hortalica.key}`, {\n        nome,\n        categoria,\n        valor\n      });\n      notificarSucesso('Hortaliça Atualizada.');\n      setLoadingAtualizar(false);\n      setTimeout(_ => {\n        history.push('/hortalicas');\n      }, 200);\n    } catch (e) {\n      const {\n        mensagem\n      } = e.reponse.data;\n      notificarErro(mensagem);\n      setLoadingAtualizar(false);\n    }\n  };\n\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n\n  const layout = {\n    labelCol: {\n      span: 5\n    },\n    wrapperCol: {\n      span: 16\n    }\n  };\n  const tailLayout = {\n    wrapperCol: {\n      offset: 5,\n      span: 16\n    }\n  };\n\n  if (carregado) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form, Object.assign({\n      id: \"formEdit\"\n    }, layout, {\n      name: \"basic\",\n      initialValues: {\n        remember: true,\n        nome: hortalica.nome,\n        categoria: hortalica.categoria,\n        valor: hortalica.valor,\n        key: hortalica.key\n      },\n      onFinish: onFinishEdit,\n      onFinishFailed: onFinishFailed,\n      onValuesChange: onFormLayoutChange,\n      size: \"larger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Item, {\n      label: \"Nome\",\n      name: \"nome\",\n      rules: [{\n        required: true,\n        message: 'O nome é obrigatorio!'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Form.Item, {\n      label: \"Categoria\",\n      name: \"categoria\",\n      rules: [{\n        required: true,\n        message: 'A Categoria é obrigatoria!'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Select, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 25\n      }\n    }, categorias.map(cat => {\n      return /*#__PURE__*/React.createElement(Select.Option, {\n        value: cat,\n        key: cat,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 45\n        }\n      }, cat);\n    }))), /*#__PURE__*/React.createElement(Form.Item, {\n      label: \"Valor\",\n      name: \"valor\",\n      rules: [{\n        required: true,\n        message: 'O valor é obrigatoria!'\n      }, () => ({\n        validator(_, value) {\n          if (value) {\n            if (value < 0) {\n              return Promise.reject('O Valor é inválido.');\n            }\n          }\n\n          return Promise.resolve();\n        }\n\n      })],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(InputNumber, {\n      defaultValue: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Form.Item, Object.assign({}, tailLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Divider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      style: {\n        marginRight: '2px'\n      },\n      loading: loadingAtualizar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 25\n      }\n    }, \"Atualizar\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"danger\",\n      htmlType: \"submit\",\n      href: \"/hortalicas\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, \"Cancelar\"))));\n  } else {\n    return /*#__PURE__*/React.createElement(Form, Object.assign({\n      id: \"formCad\"\n    }, layout, {\n      name: \"basic\",\n      initialValues: {\n        remember: true\n      },\n      onFinish: onFinish,\n      onFinishFailed: onFinishFailed,\n      onValuesChange: onFormLayoutChange,\n      size: \"larger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Form.Item, {\n      label: \"Nome\",\n      name: \"nome\",\n      rules: [{\n        required: true,\n        message: 'O nome é obrigatorio!'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Form.Item, {\n      label: \"Categoria\",\n      name: \"categoria\",\n      rules: [{\n        required: true,\n        message: 'A Categoria é obrigatoria!'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Select, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 21\n      }\n    }, categorias.map(cat => {\n      return /*#__PURE__*/React.createElement(Select.Option, {\n        value: cat,\n        key: cat,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 41\n        }\n      }, cat);\n    }))), /*#__PURE__*/React.createElement(Form.Item, {\n      label: \"Valor\",\n      name: \"valor\",\n      rules: [{\n        required: true,\n        message: 'O valor é obrigatoria!'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(InputNumber, {\n      defaultValue: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Form.Item, Object.assign({}, tailLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Divider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      style: {\n        marginRight: '2px'\n      },\n      loading: loadingSalvar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 21\n      }\n    }, \"Salvar\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"danger\",\n      htmlType: \"submit\",\n      href: \"hortalicas\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 21\n      }\n    }, \"Cancelar\")));\n  }\n}\n\nexport default FormHortalica;","map":{"version":3,"sources":["/home/samuel/Documentos/repositorios/ProjetoDevWeb/frontend/src/protected/components/FormHortalica/index.js"],"names":["React","useState","useEffect","Form","Select","InputNumber","Button","Input","Divider","notificarErro","notificarSucesso","useHistory","api","FormHortalica","keyHortalica","atualizar","history","categorias","hortalica","setHortalica","loadingSalvar","setLoadingSalvar","loadingAtualizar","setLoadingAtualizar","carregado","setCarregado","buscarHortalica","data","get","e","mensagem","reponse","onFormLayoutChange","size","console","log","onFinish","values","nome","categoria","valor","post","push","onFinishEdit","put","key","setTimeout","_","onFinishFailed","errorInfo","layout","labelCol","span","wrapperCol","tailLayout","offset","remember","required","message","map","cat","validator","value","Promise","reject","resolve","marginRight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Form, Select, InputNumber, Button, Input, Divider } from 'antd';\nimport { notificarErro, notificarSucesso } from '../Notificacao';\nimport { useHistory } from 'react-router-dom';\nimport api from '../../../service/api';\n\nfunction FormHortalica({ keyHortalica, atualizar }) {\n\n    const history = useHistory();\n\n    const categorias = ['Folhas', 'Temperos', 'Legumes', 'Raizes'];\n\n    const [hortalica, setHortalica] = useState({});\n\n    const [loadingSalvar, setLoadingSalvar] = useState(false);\n    const [loadingAtualizar, setLoadingAtualizar] = useState(false);\n    const [carregado, setCarregado] = useState(false);\n\n    useEffect(() => {\n        async function buscarHortalica() {\n            if (atualizar) {\n                if (keyHortalica) {\n                    try {\n                        const { data } = await api.get(`/hortalica/${keyHortalica}`)\n                        await setHortalica(data);\n                        setCarregado(true);\n                    } catch (e) {\n                        const { mensagem } = e.reponse.data;\n                        notificarErro(mensagem);\n                    }\n                }\n            }\n        }\n        buscarHortalica();\n    }, [atualizar, keyHortalica]);\n\n    const onFormLayoutChange = ({ size }) => {\n        console.log('formChange');\n    };\n\n    const onFinish = async values => {\n        setLoadingSalvar(true);\n        const { nome, categoria, valor } = values;\n        if (valor <= 0) {\n            notificarErro('Valor inválido.');\n        }\n        try {\n            await api.post('/hortalica', { nome, categoria, valor });\n            notificarSucesso('Hortaliça cadastrada.')\n            setLoadingSalvar(false);\n            history.push('/hortalicas');\n        } catch (e) {\n            const { mensagem } = e.reponse.data;\n            notificarErro(mensagem);\n            setLoadingSalvar(false);\n        }\n\n    };\n\n    const onFinishEdit = async values => {\n        setLoadingAtualizar(true);\n        const { nome, categoria, valor } = values;\n        try {\n            await api.put(`/hortalica/${hortalica.key}`, { nome, categoria, valor });\n            notificarSucesso('Hortaliça Atualizada.')\n            setLoadingAtualizar(false);\n            setTimeout(_ => {\n                history.push('/hortalicas');\n            }, 200);\n\n        } catch (e) {\n            const { mensagem } = e.reponse.data;\n            notificarErro(mensagem);\n            setLoadingAtualizar(false);\n        }\n\n    };\n\n    const onFinishFailed = errorInfo => {\n        console.log('Failed:', errorInfo);\n    };\n\n    const layout = {\n        labelCol: {\n            span: 5,\n        },\n        wrapperCol: {\n            span: 16,\n        },\n    };\n    const tailLayout = {\n        wrapperCol: {\n            offset: 5,\n            span: 16,\n        },\n    };\n    if (carregado) {\n        return (\n            <div>\n                <Form id='formEdit'\n                    {...layout}\n                    name='basic'\n                    initialValues={{\n                        remember: true,\n                        nome: hortalica.nome,\n                        categoria: hortalica.categoria,\n                        valor: hortalica.valor,\n                        key: hortalica.key\n                    }}\n                    onFinish={onFinishEdit}\n                    onFinishFailed={onFinishFailed}\n                    onValuesChange={onFormLayoutChange}\n                    size='larger'>\n                    <Form.Item\n                        label='Nome'\n                        name=\"nome\"\n                        rules={[\n                            {\n                                required: true,\n                                message: 'O nome é obrigatorio!'\n                            }]}\n                    >\n                        <Input />\n                    </Form.Item>\n                    <Form.Item\n                        label='Categoria'\n                        name=\"categoria\"\n                        rules={[\n                            {\n                                required: true,\n                                message: 'A Categoria é obrigatoria!',\n                            }]}\n                    >\n                        <Select>\n                            {\n                                categorias.map((cat) => {\n                                    return (<Select.Option value={cat} key={cat}>{cat}</Select.Option>)\n                                })\n                            }\n                        </Select>\n                    </Form.Item>\n                    <Form.Item\n                        label='Valor'\n                        name=\"valor\"\n                        rules={[\n                            {\n                                required: true,\n                                message: 'O valor é obrigatoria!',\n                            },\n                            () => ({\n                                validator(_, value) {\n                                    if (value) {\n                                        if ( value < 0) {\n                                            return Promise.reject('O Valor é inválido.');\n                                        }\n                                    }\n                                    return Promise.resolve();\n                                },\n                            }),\n                        ]}\n                    >\n                        <InputNumber defaultValue={0} />\n                    </Form.Item>\n                    <Form.Item {...tailLayout}>\n                        <Divider />\n                        <Button\n                            type=\"primary\"\n                            htmlType=\"submit\"\n                            style={{ marginRight: '2px' }}\n                            loading={loadingAtualizar}>\n                            Atualizar\n                        </Button>\n\n                        <Button\n                            type='danger'\n                            htmlType='submit'\n                            href='/hortalicas'\n                        >\n                            Cancelar\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </div>\n        );\n    } else {\n        return (\n\n            <Form id='formCad'\n                {...layout}\n                name='basic'\n                initialValues={{\n                    remember: true\n                }}\n                onFinish={onFinish}\n                onFinishFailed={onFinishFailed}\n                onValuesChange={onFormLayoutChange}\n                size='larger'>\n                <Form.Item\n                    label='Nome'\n                    name=\"nome\"\n                    rules={[\n                        {\n                            required: true,\n                            message: 'O nome é obrigatorio!'\n                        }]}\n                >\n                    <Input />\n                </Form.Item>\n                <Form.Item\n                    label='Categoria'\n                    name=\"categoria\"\n                    rules={[\n                        {\n                            required: true,\n                            message: 'A Categoria é obrigatoria!',\n                        }]}\n                >\n                    <Select>\n                        {\n                            categorias.map((cat) => {\n                                return (<Select.Option value={cat} key={cat}>{cat}</Select.Option>)\n                            })\n                        }\n                    </Select>\n                </Form.Item>\n                <Form.Item\n                    label='Valor'\n                    name=\"valor\"\n                    rules={[\n                        {\n                            required: true,\n                            message: 'O valor é obrigatoria!',\n                        }]}\n                >\n                    <InputNumber defaultValue={0} />\n                </Form.Item>\n                <Form.Item {...tailLayout}>\n                    <Divider />\n                    <Button\n                        type=\"primary\"\n                        htmlType=\"submit\"\n                        style={{ marginRight: '2px' }}\n                        loading={loadingSalvar}>\n                        Salvar\n                        </Button>\n\n                    <Button\n                        type='danger'\n                        htmlType='submit'\n                        href='hortalicas'\n                    >\n                        Cancelar\n                        </Button>\n                </Form.Item>\n            </Form>\n        );\n    }\n}\n\nexport default FormHortalica;\n"]},"metadata":{},"sourceType":"module"}