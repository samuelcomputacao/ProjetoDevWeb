{"ast":null,"code":"var _jsxFileName = \"/home/samuel/Documentos/repositorios/ProjetoDevWeb/frontend/src/protected/components/TabelaHortalicas/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Table, Button, Input } from 'antd';\nimport Highlighter from 'react-highlight-words';\nimport { SearchOutlined, DeleteOutlined, EditOutlined } from '@ant-design/icons';\nimport api from '../../../service/api';\nimport { useHistory } from 'react-router-dom';\nimport { notificarSucesso, notificarErro } from '../Notificacao';\nimport { showConfirm } from '../ConfirmAcao';\n\nfunction TabelaHortalicas() {\n  const [lista, setLista] = useState('');\n  const [loadingTable, setLoadingTable] = useState(false);\n  const [handleUpdateTable, setHandleUpdateTable] = useState(true);\n  const [searchText, setSearchText] = useState('');\n  const [searchedColumn, setSearchedColumn] = useState('');\n  const history = useHistory();\n  useEffect(() => {\n    async function carregaHortalicas() {\n      setLoadingTable(true);\n      const {\n        data\n      } = await api.get('/hortalica');\n      setLista(data);\n      setLoadingTable(false);\n    }\n\n    carregaHortalicas();\n  }, [handleUpdateTable]);\n  const acoes = {\n    title: 'Ações',\n    dataIndex: 'acoes',\n    key: 'acoes',\n    render: (text, record) => React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      style: {\n        marginLeft: '2px'\n      },\n      icon: React.createElement(EditOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }),\n      onClick: _ => {\n        editarHortalica(record.key);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"primary\",\n      style: {\n        marginLeft: '2px'\n      },\n      danger: true,\n      icon: React.createElement(DeleteOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }),\n      onClick: _ => {\n        const title = 'Deseja excluir a hortaliça?';\n        const content = `Ao clicar em OK você excluirá a hortaliça de código ${record.key}`;\n        const params = {\n          key: record.key\n        };\n        showConfirm(title, content, excluiHortalica, params);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }))\n  };\n\n  const editarHortalica = key => {\n    history.push({\n      pathname: '/perfilHortalica',\n      search: `?key=${key}`\n    });\n  };\n\n  const excluiHortalica = async ({\n    key\n  }) => {\n    try {\n      await api.delete(`/hortalica/${key}`);\n      setHandleUpdateTable(!handleUpdateTable);\n      notificarSucesso('Hortaliça removida com sucesso.');\n    } catch (e) {\n      const {\n        mensagem\n      } = e.response.data;\n      notificarErro(mensagem);\n    }\n  };\n\n  const getColumnSearchProps = dataIndex => ({\n    filterDropdown: ({\n      setSelectedKeys,\n      selectedKeys,\n      confirm,\n      clearFilters\n    }) => React.createElement(\"div\", {\n      style: {\n        padding: 8\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: `Buscar ${dataIndex}`,\n      value: selectedKeys[0],\n      onChange: e => setSelectedKeys(e.target.value ? [e.target.value] : []),\n      onPressEnter: () => handleSearch(selectedKeys, confirm, dataIndex),\n      style: {\n        width: 188,\n        marginBottom: 8,\n        display: 'block'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"primary\",\n      onClick: () => handleSearch(selectedKeys, confirm, dataIndex),\n      icon: React.createElement(SearchOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }),\n      size: \"small\",\n      style: {\n        width: 90,\n        marginRight: 8\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Buscar\"), React.createElement(Button, {\n      onClick: () => handleReset(clearFilters),\n      size: \"small\",\n      style: {\n        width: 90\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Resetar\")),\n    filterIcon: filtered => React.createElement(SearchOutlined, {\n      style: {\n        color: filtered ? '#1890ff' : undefined\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }),\n    onFilter: (value, record) => record[dataIndex].toString().toLowerCase().includes(value.toLowerCase()),\n    onFilterDropdownVisibleChange: visible => {},\n    render: text => searchedColumn === dataIndex ? React.createElement(Highlighter, {\n      highlightStyle: {\n        backgroundColor: '#ffc069',\n        padding: 0\n      },\n      searchWords: [searchText],\n      autoEscape: true,\n      textToHighlight: text.toString(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }) : text\n  });\n\n  const handleSearch = (selectedKeys, confirm, dataIndex) => {\n    confirm();\n    setSearchText(selectedKeys[0]);\n    setSearchedColumn(dataIndex);\n  };\n\n  const handleReset = clearFilters => {\n    clearFilters();\n    setSearchText('');\n  };\n\n  const columns = [{\n    title: 'Codigo',\n    dataIndex: 'key',\n    key: 'key',\n    defaultSortOrder: 'ascend',\n    sorter: (a, b) => a.key - b.key\n  }, {\n    title: 'Nome',\n    dataIndex: 'nome',\n    key: 'nome',\n    defaultSortOrder: 'ascend',\n    sorter: (a, b) => a.nome > b.nome ? 1 : b.nome > a.nome ? -1 : 0,\n    ...getColumnSearchProps('nome')\n  }, {\n    title: 'Categoria',\n    dataIndex: 'categoria',\n    key: 'categoria',\n    defaultSortOrder: 'ascend',\n    sorter: (a, b) => a.categoria > b.categoria ? 1 : b.categoria > a.categoria ? -1 : 0,\n    filters: [{\n      text: 'Folhas',\n      value: 'Folhas'\n    }, {\n      text: 'Raizes',\n      value: 'Raizes'\n    }, {\n      text: 'Legumes',\n      value: 'Legumes'\n    }],\n    onFilter: (value, record) => record.categoria.indexOf(value) === 0\n  }, {\n    title: 'Classificação',\n    dataIndex: 'classificacao',\n    key: 'classificacao',\n    defaultSortOrder: 'ascend',\n    sorter: (a, b) => a.classificacao - b.classificacao\n  }, {\n    title: 'Valor (R$)',\n    dataIndex: 'valor',\n    key: 'valor',\n    defaultSortOrder: 'ascend',\n    sorter: (a, b) => a.valor - b.valor\n  }, acoes];\n  return React.createElement(Table, {\n    dataSource: lista,\n    columns: columns,\n    className: \"Tabela\",\n    loading: loadingTable,\n    pagination: {\n      pageSizeOptions: ['5', '10', '20', '40'],\n      showSizeChanger: true,\n      pageSize: 5\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  });\n}\n\nexport default TabelaHortalicas;","map":{"version":3,"sources":["/home/samuel/Documentos/repositorios/ProjetoDevWeb/frontend/src/protected/components/TabelaHortalicas/index.js"],"names":["React","useState","useEffect","Table","Button","Input","Highlighter","SearchOutlined","DeleteOutlined","EditOutlined","api","useHistory","notificarSucesso","notificarErro","showConfirm","TabelaHortalicas","lista","setLista","loadingTable","setLoadingTable","handleUpdateTable","setHandleUpdateTable","searchText","setSearchText","searchedColumn","setSearchedColumn","history","carregaHortalicas","data","get","acoes","title","dataIndex","key","render","text","record","marginLeft","_","editarHortalica","content","params","excluiHortalica","push","pathname","search","delete","e","mensagem","response","getColumnSearchProps","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","target","value","handleSearch","width","marginBottom","display","marginRight","handleReset","filterIcon","filtered","color","undefined","onFilter","toString","toLowerCase","includes","onFilterDropdownVisibleChange","visible","backgroundColor","columns","defaultSortOrder","sorter","a","b","nome","categoria","filters","indexOf","classificacao","valor","pageSizeOptions","showSizeChanger","pageSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Table, Button,Input } from 'antd';\nimport Highlighter from 'react-highlight-words';\nimport { SearchOutlined,DeleteOutlined,EditOutlined } from '@ant-design/icons';\nimport api from '../../../service/api';\nimport { useHistory } from 'react-router-dom';\nimport { notificarSucesso, notificarErro } from '../Notificacao';\nimport {showConfirm} from '../ConfirmAcao';\n\nfunction TabelaHortalicas() {\n\n    const [lista, setLista] = useState('');\n    \n    const [loadingTable, setLoadingTable] = useState(false);\n    const [handleUpdateTable, setHandleUpdateTable] = useState(true);\n\n    const [searchText, setSearchText]  = useState('');\n    const [searchedColumn, setSearchedColumn] = useState('');\n\n    const history = useHistory();\n\n\n    useEffect(() => {\n        async function carregaHortalicas() {\n            setLoadingTable(true);\n            const { data } = await api.get('/hortalica');\n            setLista(data);\n            setLoadingTable(false);\n        }\n        carregaHortalicas();\n    }, [handleUpdateTable]);\n\n\n    const acoes = {\n        title: 'Ações',\n        dataIndex: 'acoes',\n        key: 'acoes',\n        render: (text, record) => (\n            <span>\n                <Button\n                    type='primary'\n                    style={{ marginLeft: '2px' }}\n                    icon={<EditOutlined />}\n                    onClick={_ => {\n                        editarHortalica(record.key);\n                    }}\n                />\n                <Button\n                    type='primary'\n                    style={{ marginLeft: '2px' }}\n                    danger\n                    icon={<DeleteOutlined />}\n                    onClick={_ => {\n                        const title = 'Deseja excluir a hortaliça?'\n                        const content = `Ao clicar em OK você excluirá a hortaliça de código ${record.key}`;\n                        const params = { key:record.key };\n                        showConfirm(title, content, excluiHortalica, params);\n                    }\n                }\n                />\n            </span>\n        )\n    }\n\n    const editarHortalica = (key) => {\n        history.push({\n            pathname:'/perfilHortalica',\n            search:`?key=${key}`\n        })\n    }\n\n    const excluiHortalica = async ({key}) =>{\n        try {\n            await api.delete(`/hortalica/${key}`);\n            setHandleUpdateTable(!handleUpdateTable);\n            notificarSucesso('Hortaliça removida com sucesso.')\n        } catch (e) {\n            const {mensagem} = e.response.data;\n            notificarErro(mensagem);\n        }\n    }\n    \n    const getColumnSearchProps = dataIndex => ({\n        filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n            <div style={{ padding: 8 }}>\n                <Input\n                    placeholder={`Buscar ${dataIndex}`}\n                    value={selectedKeys[0]}\n                    onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n                    onPressEnter={() => handleSearch(selectedKeys, confirm, dataIndex)}\n                    style={{ width: 188, marginBottom: 8, display: 'block' }}\n                />\n                <Button\n                    type=\"primary\"\n                    onClick={() => handleSearch(selectedKeys, confirm, dataIndex)}\n                    icon={<SearchOutlined />}\n                    size=\"small\"\n                    style={{ width: 90, marginRight: 8 }}\n                >\n                    Buscar\n            </Button>\n                <Button onClick={() => handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\n                    Resetar\n            </Button>\n            </div>\n        ),\n        filterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\n        onFilter: (value, record) =>\n            record[dataIndex]\n                .toString()\n                .toLowerCase()\n                .includes(value.toLowerCase()),\n        onFilterDropdownVisibleChange: visible => {\n        },\n        render: text =>\n            searchedColumn === dataIndex ? (\n                <Highlighter\n                    highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\n                    searchWords={[searchText]}\n                    autoEscape\n                    textToHighlight={text.toString()}\n                />\n            ) : (\n                    text\n                ),\n    });\n\n    const handleSearch = (selectedKeys, confirm, dataIndex) => {\n        confirm();\n        setSearchText(selectedKeys[0]);\n        setSearchedColumn(dataIndex);\n    };\n\n    const handleReset = clearFilters => {\n        clearFilters();\n        setSearchText('');\n    };\n\n    const columns = [\n        {\n            title: 'Codigo',\n            dataIndex: 'key',\n            key: 'key',\n            defaultSortOrder: 'ascend',\n            sorter: (a, b) => a.key - b.key,\n\n        },\n        {\n            title: 'Nome',\n            dataIndex: 'nome',\n            key: 'nome',\n            defaultSortOrder: 'ascend',\n            sorter: (a, b) => ((a.nome > b.nome) ? 1 : ((b.nome > a.nome) ? -1 : 0)),\n            ...getColumnSearchProps('nome'),\n        },\n        {\n            title: 'Categoria',\n            dataIndex: 'categoria',\n            key: 'categoria',\n            defaultSortOrder: 'ascend',\n            sorter: (a, b) => ((a.categoria > b.categoria) ? 1 : ((b.categoria > a.categoria) ? -1 : 0)),\n            \n            filters: [\n                {\n                    text: 'Folhas',\n                    value: 'Folhas',\n                },\n                {\n                    text: 'Raizes',\n                    value: 'Raizes',\n                },\n                {\n                    text: 'Legumes',\n                    value: 'Legumes',\n                },\n            ],\n            onFilter: (value, record) => record.categoria.indexOf(value) === 0,\n        },\n        {\n            title: 'Classificação',\n            dataIndex: 'classificacao',\n            key: 'classificacao',\n            defaultSortOrder: 'ascend',\n            sorter: (a, b) => a.classificacao - b.classificacao,\n\n        },\n        {\n            title: 'Valor (R$)',\n            dataIndex: 'valor',\n            key: 'valor',\n            defaultSortOrder: 'ascend',\n            sorter: (a, b) => a.valor - b.valor,\n        },\n        acoes,\n    ];\n\n    return (\n        <Table dataSource={lista} columns={columns} className='Tabela' loading={loadingTable}  pagination= { {pageSizeOptions: ['5','10','20', '40'], showSizeChanger: true,pageSize:5}}/>\n    );\n}\n\nexport default TabelaHortalicas;"]},"metadata":{},"sourceType":"module"}