{"ast":null,"code":"var _jsxFileName = \"/home/samuel/Documentos/repositorios/ProjetoDevWeb/frontend/src/protected/components/TabelaUsuarios/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport { Button, Input, Table, Divider, Modal, Radio } from 'antd';\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons';\nimport { notificarErro, notificarSucesso } from '../../components/Notificacao';\nimport Highlighter from 'react-highlight-words';\nimport { SearchOutlined } from '@ant-design/icons';\nimport Titulo from '../Titulo';\nimport api from '../../../service/api';\nimport './index.css';\nconst {\n  Group\n} = Radio;\n\nfunction TabelaUsuarios() {\n  const [searchText, setSearchText] = useState('');\n  const [searchedColumn, setSearchedColumn] = useState('');\n  const [lista, setLista] = useState([]);\n  const [loadingTable, setLoadingTable] = useState(false);\n  const [handleUpdateTable, setHandleUpdateTable] = useState(true);\n  const [modalVisible, setModalVisible] = useState(false);\n  const [tipoCadastro, setTipoCadastro] = useState(0);\n  const history = useHistory();\n  useEffect(() => {\n    async function carregaUsuarios() {\n      setLoadingTable(true);\n      const {\n        data\n      } = await api.get('/usuario');\n      setLista(data);\n      setLoadingTable(false);\n    }\n\n    carregaUsuarios();\n  }, [handleUpdateTable]);\n\n  const excluirUsuario = async key => {\n    try {\n      await api.delete(`/usuario/${key}`);\n      notificarSucesso('Usuário deletado com sucesso');\n      setHandleUpdateTable(!handleUpdateTable);\n    } catch (e) {\n      const {\n        mensagem\n      } = e.response.data;\n      notificarErro(mensagem);\n    }\n  };\n\n  const acoes = {\n    title: 'Ações',\n    dataIndex: 'acoes',\n    key: 'acoes',\n    render: (text, record) => React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      style: {\n        marginLeft: '2px'\n      },\n      icon: React.createElement(EditOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }),\n      onClick: _ => {\n        editarUsuario(record);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"primary\",\n      style: {\n        marginLeft: '2px'\n      },\n      danger: true,\n      icon: React.createElement(DeleteOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }),\n      onClick: _ => {\n        excluirUsuario(record.key);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }))\n  };\n\n  const editarUsuario = async usuario => {\n    history.push({\n      pathname: '/editarUsuario',\n      search: `?key=${usuario.key}&tipo=${usuario.tipoCadastro}`\n    });\n  };\n\n  const getColumnSearchProps = dataIndex => ({\n    filterDropdown: ({\n      setSelectedKeys,\n      selectedKeys,\n      confirm,\n      clearFilters\n    }) => React.createElement(\"div\", {\n      style: {\n        padding: 8\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: `Buscar ${dataIndex}`,\n      value: selectedKeys[0],\n      onChange: e => setSelectedKeys(e.target.value ? [e.target.value] : []),\n      onPressEnter: () => handleSearch(selectedKeys, confirm, dataIndex),\n      style: {\n        width: 188,\n        marginBottom: 8,\n        display: 'block'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"primary\",\n      onClick: () => handleSearch(selectedKeys, confirm, dataIndex),\n      icon: React.createElement(SearchOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }),\n      size: \"small\",\n      style: {\n        width: 90,\n        marginRight: 8\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Buscar\"), React.createElement(Button, {\n      onClick: () => handleReset(clearFilters),\n      size: \"small\",\n      style: {\n        width: 90\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Resetar\")),\n    filterIcon: filtered => React.createElement(SearchOutlined, {\n      style: {\n        color: filtered ? '#1890ff' : undefined\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }),\n    onFilter: (value, record) => record[dataIndex].toString().toLowerCase().includes(value.toLowerCase()),\n    onFilterDropdownVisibleChange: visible => {},\n    render: text => searchedColumn === dataIndex ? React.createElement(Highlighter, {\n      highlightStyle: {\n        backgroundColor: '#ffc069',\n        padding: 0\n      },\n      searchWords: [searchText],\n      autoEscape: true,\n      textToHighlight: text.toString(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }) : text\n  });\n\n  const handleSearch = (selectedKeys, confirm, dataIndex) => {\n    confirm();\n    setSearchText(selectedKeys[0]);\n    setSearchedColumn(dataIndex);\n  };\n\n  const handleReset = clearFilters => {\n    clearFilters();\n    setSearchText('');\n  };\n\n  const columns = [{\n    title: 'Código',\n    dataIndex: 'key',\n    key: 'key',\n    defaultSortOrder: 'ascend',\n    sorter: (a, b) => a.key - b.key\n  }, {\n    title: 'Nome',\n    dataIndex: 'nome',\n    key: 'nome',\n    defaultSortOrder: 'ascend',\n    sorter: (a, b) => a.nome > b.nome ? 1 : b.nome > a.nome ? -1 : 0,\n    ...getColumnSearchProps('nome')\n  }, {\n    title: 'CpfCnpj',\n    dataIndex: 'cpfCnpj',\n    key: 'cpfCnpj',\n    defaultSortOrder: 'ascend',\n    sorter: (a, b) => a.cpfCnpj > b.cpfCnpj ? 1 : b.cpfCnpj > a.cpfCnpj ? -1 : 0\n  }, {\n    title: 'Função',\n    dataIndex: 'funcao',\n    filters: [{\n      text: 'Funcionario',\n      value: 'Funcionario'\n    }, {\n      text: 'Cliente',\n      value: 'Cliente'\n    }],\n    onFilter: (value, record) => record.funcao.indexOf(value) === 0\n  }, acoes];\n  const radioStyle = {\n    display: 'block',\n    height: '30px',\n    lineHeight: '30px'\n  };\n\n  const onChange = e => {\n    setTipoCadastro(e.target.value);\n  };\n\n  const openModal = () => {\n    setModalVisible(true);\n  };\n\n  const closeModal = () => {\n    setModalVisible(false);\n  };\n\n  const redirectCadastro = () => {\n    history.push({\n      pathname: '/cadastroUsuarios',\n      search: `?tipo=${tipoCadastro}`\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, React.createElement(Titulo, {\n    nome: \"Usu\\xE1rios\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }), React.createElement(Table, {\n    dataSource: lista,\n    columns: columns,\n    className: \"Tabela\",\n    bordered: true,\n    loading: loadingTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }), React.createElement(Button, {\n    type: \"primary\",\n    onClick: openModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, \"Cadastrar\"), React.createElement(Modal, {\n    visible: modalVisible,\n    title: \"Tipo de Cadastro!\",\n    onOk: redirectCadastro,\n    onCancel: closeModal,\n    footer: [React.createElement(Button, {\n      key: \"back\",\n      danger: true,\n      type: \"primary\",\n      onClick: closeModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Cancelar\"), React.createElement(Button, {\n      key: \"submit\",\n      type: \"primary\",\n      onClick: redirectCadastro,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"Confirmar\")],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, React.createElement(Group, {\n    onChange: onChange,\n    value: tipoCadastro,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, React.createElement(Radio, {\n    style: radioStyle,\n    value: 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, \"Pessoa F\\xEDsica\"), React.createElement(Radio, {\n    style: radioStyle,\n    value: 1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, \"Pessoa Jur\\xEDdica\"))));\n}\n\nexport default TabelaUsuarios;","map":{"version":3,"sources":["/home/samuel/Documentos/repositorios/ProjetoDevWeb/frontend/src/protected/components/TabelaUsuarios/index.js"],"names":["React","useState","useEffect","useHistory","Button","Input","Table","Divider","Modal","Radio","DeleteOutlined","EditOutlined","notificarErro","notificarSucesso","Highlighter","SearchOutlined","Titulo","api","Group","TabelaUsuarios","searchText","setSearchText","searchedColumn","setSearchedColumn","lista","setLista","loadingTable","setLoadingTable","handleUpdateTable","setHandleUpdateTable","modalVisible","setModalVisible","tipoCadastro","setTipoCadastro","history","carregaUsuarios","data","get","excluirUsuario","key","delete","e","mensagem","response","acoes","title","dataIndex","render","text","record","marginLeft","_","editarUsuario","usuario","push","pathname","search","getColumnSearchProps","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","target","value","handleSearch","width","marginBottom","display","marginRight","handleReset","filterIcon","filtered","color","undefined","onFilter","toString","toLowerCase","includes","onFilterDropdownVisibleChange","visible","backgroundColor","columns","defaultSortOrder","sorter","a","b","nome","cpfCnpj","filters","funcao","indexOf","radioStyle","height","lineHeight","onChange","openModal","closeModal","redirectCadastro"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport { Button, Input, Table, Divider, Modal,Radio } from 'antd';\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons';\nimport { notificarErro, notificarSucesso } from '../../components/Notificacao';\nimport Highlighter from 'react-highlight-words';\nimport { SearchOutlined } from '@ant-design/icons';\nimport Titulo from '../Titulo';\nimport api from '../../../service/api';\nimport './index.css';\n\nconst {Group} = Radio;\n\nfunction TabelaUsuarios() {\n\n    const [searchText, setSearchText] = useState('');\n    const [searchedColumn, setSearchedColumn] = useState('');\n    const [lista, setLista] = useState([]);\n    const [loadingTable, setLoadingTable] = useState(false);\n    const [handleUpdateTable, setHandleUpdateTable] = useState(true);\n\n    const [modalVisible, setModalVisible] = useState(false);\n    const [tipoCadastro, setTipoCadastro] = useState(0); \n\n    const history = useHistory();\n    \n\n    useEffect(() => {\n        async function carregaUsuarios() {\n            setLoadingTable(true);\n            const { data } = await api.get('/usuario');\n            setLista(data);\n            setLoadingTable(false);\n        }\n        carregaUsuarios();\n    }, [handleUpdateTable]);\n\n    const excluirUsuario = async (key) => {\n        try {\n            await api.delete(`/usuario/${key}`);\n            notificarSucesso('Usuário deletado com sucesso');\n            setHandleUpdateTable(!handleUpdateTable);\n        } catch (e) {\n            const { mensagem } = e.response.data;\n            notificarErro(mensagem);\n        }\n    }\n\n\n\n    const acoes = {\n        title: 'Ações',\n        dataIndex: 'acoes',\n        key: 'acoes',\n        render: (text, record) => (\n            <span>\n                <Button\n                    type='primary'\n                    style={{ marginLeft: '2px' }}\n                    icon={<EditOutlined />}\n                    onClick={\n                        _ => { editarUsuario(record) }\n                    }\n                />\n                <Button\n                    type='primary'\n                    style={{ marginLeft: '2px' }}\n                    danger\n                    icon={<DeleteOutlined />}\n                    onClick={\n                        _ => { excluirUsuario(record.key) }\n                    }\n                />\n            </span>\n        ),\n    }\n\n    const editarUsuario = async (usuario) => {\n        history.push({\n            pathname: '/editarUsuario',\n            search: `?key=${usuario.key}&tipo=${usuario.tipoCadastro}`\n        });\n\n    }\n\n    const getColumnSearchProps = dataIndex => ({\n        filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n            <div style={{ padding: 8 }}>\n                <Input\n                    placeholder={`Buscar ${dataIndex}`}\n                    value={selectedKeys[0]}\n                    onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n                    onPressEnter={() => handleSearch(selectedKeys, confirm, dataIndex)}\n                    style={{ width: 188, marginBottom: 8, display: 'block' }}\n                />\n                <Button\n                    type=\"primary\"\n                    onClick={() => handleSearch(selectedKeys, confirm, dataIndex)}\n                    icon={<SearchOutlined />}\n                    size=\"small\"\n                    style={{ width: 90, marginRight: 8 }}\n                >\n                    Buscar\n            </Button>\n                <Button onClick={() => handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\n                    Resetar\n            </Button>\n            </div>\n        ),\n        filterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\n        onFilter: (value, record) =>\n            record[dataIndex]\n                .toString()\n                .toLowerCase()\n                .includes(value.toLowerCase()),\n        onFilterDropdownVisibleChange: visible => {\n        },\n        render: text =>\n            searchedColumn === dataIndex ? (\n                <Highlighter\n                    highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\n                    searchWords={[searchText]}\n                    autoEscape\n                    textToHighlight={text.toString()}\n                />\n            ) : (\n                    text\n                ),\n    });\n\n    const handleSearch = (selectedKeys, confirm, dataIndex) => {\n        confirm();\n        setSearchText(selectedKeys[0]);\n        setSearchedColumn(dataIndex);\n    };\n\n    const handleReset = clearFilters => {\n        clearFilters();\n        setSearchText('');\n    };\n\n    const columns = [\n        {\n            title: 'Código',\n            dataIndex: 'key',\n            key: 'key',\n            defaultSortOrder: 'ascend',\n            sorter: (a, b) => a.key - b.key,\n        },\n        {\n            title: 'Nome',\n            dataIndex: 'nome',\n            key: 'nome',\n            defaultSortOrder: 'ascend',\n            sorter: (a, b) => ((a.nome > b.nome) ? 1 : ((b.nome > a.nome) ? -1 : 0)),\n            ...getColumnSearchProps('nome')\n        },\n        {\n            title: 'CpfCnpj',\n            dataIndex: 'cpfCnpj',\n            key: 'cpfCnpj',\n            defaultSortOrder: 'ascend',\n            sorter: (a, b) => ((a.cpfCnpj > b.cpfCnpj) ? 1 : ((b.cpfCnpj > a.cpfCnpj) ? -1 : 0)),\n        },\n\n        {\n            title: 'Função',\n            dataIndex: 'funcao',\n            filters: [\n                {\n                    text: 'Funcionario',\n                    value: 'Funcionario',\n                },\n                {\n                    text: 'Cliente',\n                    value: 'Cliente',\n                },\n            ],\n            onFilter: (value, record) => record.funcao.indexOf(value) === 0,\n        },\n        acoes,\n    ];\n\n    const radioStyle = {\n        display: 'block',\n        height: '30px',\n        lineHeight: '30px',\n      };\n\n    const onChange = e => {\n       setTipoCadastro(e.target.value);\n    };\n\n    const openModal = () => {\n        setModalVisible(true);\n    }\n\n    const closeModal = () => {\n        setModalVisible(false);\n    }\n\n    const redirectCadastro  = () => {\n        history.push({\n            pathname:'/cadastroUsuarios',\n            search:`?tipo=${tipoCadastro}`\n        });\n    }\n\n    return (\n        <div>\n            <Titulo nome='Usuários' />\n            <Divider />\n            <Table dataSource={lista} columns={columns} className='Tabela' bordered loading={loadingTable} />\n            <Divider />\n            <Button type='primary' onClick={openModal}>Cadastrar</Button>\n            <Modal\n                visible={modalVisible}\n                title=\"Tipo de Cadastro!\"\n                onOk={redirectCadastro}\n                onCancel={closeModal}\n                footer={[\n                    <Button key='back' danger type='primary' onClick={closeModal}>\n                        Cancelar\n                    </Button>,\n                    <Button key='submit' type='primary' onClick={redirectCadastro}>\n                        Confirmar\n                    </Button>,\n                ]}\n            >\n                <Group onChange={onChange} value={tipoCadastro}>\n                    <Radio style={radioStyle} value={0}>\n                        Pessoa Física\n                    </Radio>\n                    <Radio style={radioStyle} value={1}>\n                        Pessoa Jurídica\n                     </Radio>\n                </Group>\n            </Modal>\n        </div >\n    );\n}\n\nexport default TabelaUsuarios;"]},"metadata":{},"sourceType":"module"}